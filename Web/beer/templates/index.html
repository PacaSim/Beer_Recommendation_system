<!DOCTYPE html>
<html lang="en">
    <head>
        <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>당신의 맥주 무엇?</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="/static/assets/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="/static/css/styles.css" rel="stylesheet" />
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top" id="mainNav">
            <div class="container">
                <a class="navbar-brand" href="#page-top">당신의 맥주 무엇?</a>
                <button class="navbar-toggler text-uppercase font-weight-bold bg-primary text-white rounded" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    Menu
                    <i class="fas fa-bars"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ms-auto">
                        {% if current_user.is_authenticated %}
                        {% if count >=5 %}
                        <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href="{{url_for('recomm.ver2')}}">추천 맥주</a></li>
                        {% endif %}
                        <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href="{{url_for('auth.logout')}}">로그아웃</a></li>
                        {% else %}
                        <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href="{{url_for('auth.login')}}">로그인</a></li>
                        <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href="{{url_for('auth.register')}}">회원가입</a></li>
                        {% endif %}
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Masthead-->
        <header class="masthead bg-primary text-white text-center">
            <div class="container d-flex align-items-center flex-column">
                <!-- Masthead Avatar Image-->
                <img class="masthead-avatar mb-5" src="/static/assets/img/beer_icon.png" alt="..." />
                <!-- Masthead Heading-->
                <h1 class="masthead-heading text-uppercase mb-0">오늘 맥주 한 잔</h1>
                <!-- Icon Divider-->
                <div class="divider-custom divider-light">
                    <div class="divider-custom-line"></div>
                    <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                    <div class="divider-custom-line"></div>
                </div>
                <!-- Masthead Subheading-->
                <p class="masthead-subheading font-weight-light mb-0">CF 기반 - 맥주 추천 - 맥주 커뮤니티</p>
            </div>
        </header>
        <!-- Portfolio Section-->
        <section class="page-section portfolio" id="portfolio">
            <div class="container">
                <!-- Portfolio Section Heading-->
                <h2 class="page-section-heading text-center text-uppercase text-secondary mb-0">이 맥주는 어때요?</h2>
                <!-- Icon Divider-->
                <div class="divider-custom">
                    <div class="divider-custom-line"></div>
                    <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                    <div class="divider-custom-line"></div>
                </div>
                <!-- Portfolio Grid Items-->
                <div class="row justify-content-center">
                    <!-- Portfolio Item 1-->
                    <div class="col-md-6 col-lg-4 mb-5">
                        <div class="portfolio-item mx-auto" data-bs-toggle="modal" data-bs-target="#portfolioModal1">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="/static/assets/img/beer_image/{{result.0}}.jpg" onerror="this.src='/static/assets/img/beer_image/alt.png'" />
                        </div>
                    </div>
                    <!-- Portfolio Item 2-->
                    <div class="col-md-6 col-lg-4 mb-5">
                        <div class="portfolio-item mx-auto" data-bs-toggle="modal" data-bs-target="#portfolioModal2">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="/static/assets/img/beer_image/{{result.1}}.jpg" onerror="this.src='/static/assets/img/beer_image/alt.png'"/>
                        </div>
                    </div>
                    <!-- Portfolio Item 3-->
                    <div class="col-md-6 col-lg-4 mb-5">
                        <div class="portfolio-item mx-auto" data-bs-toggle="modal" data-bs-target="#portfolioModal3">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="/static/assets/img/beer_image/{{result.2}}.jpg" onerror="this.src='/static/assets/img/beer_image/alt.png'"/>
                        </div>
                    </div>
                    <!-- Portfolio Item 4-->
                    <div class="col-md-6 col-lg-4 mb-5 mb-lg-0">
                        <div class="portfolio-item mx-auto" data-bs-toggle="modal" data-bs-target="#portfolioModal4">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="/static/assets/img/beer_image/{{result.3}}.jpg" onerror="this.src='/static/assets/img/beer_image/alt.png'" />
                        </div>
                    </div>
                    <!-- Portfolio Item 5-->
                    <div class="col-md-6 col-lg-4 mb-5 mb-md-0">
                        <div class="portfolio-item mx-auto" data-bs-toggle="modal" data-bs-target="#portfolioModal5">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="/static/assets/img/beer_image/{{result.4}}.jpg" onerror="this.src='/static/assets/img/beer_image/alt.png'" />
                        </div>
                    </div>
                    <!-- Portfolio Item 6-->
                    <div class="col-md-6 col-lg-4">
                        <div class="portfolio-item mx-auto" data-bs-toggle="modal" data-bs-target="#portfolioModal6">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="/static/assets/img/beer_image/{{result.5}}.jpg" onerror="this.src='/static/assets/img/beer_image/alt.png'" />
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- About Section-->
        <section class="page-section bg-primary text-white mb-0" id="about">
            <div class="container">
                <!-- About Section Heading-->
                <h2 class="page-section-heading text-center text-uppercase text-white">Information</h2>
                <!-- Icon Divider-->
                <div class="divider-custom divider-light">
                    <div class="divider-custom-line"></div>
                    <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                    <div class="divider-custom-line"></div>
                </div>
                <!-- About Section Content-->
                <div class="row">
                    <div class="col-lg-4 ms-auto"><p class="lead">1. 본 서비스는 반드시 로그인이 필요합니다. 사용자의 최애 맥주와 선호 취향에 따라 최근접 협업 필터링으로 가장 유사한 맥주 6개를 메인에 소개합니다.</p></div>
                    <div class="col-lg-4 me-auto"><p class="lead">2. 각 맥주에 대한 클러스터 유형 및 연도별 평점 트렌드를 보고 직접 평점과 한 줄 평을 남길 수 있습니다. 평점을 5개 이상 남길 시 평점을 기반으로 한 추천 맥주 TOP 3를 조회하실 수 있습니다.</p></div>
                </div>
                <!-- About Section Button-->
                <div class="text-center mt-4">
                    <a class="btn btn-xl btn-outline-light" href="#portfolio">
                        <i class="fas fa me-2"></i>
                        맥주 추천 및 평점 남기기
                    </a>
                </div>
            </div>
        </section>
       
        <!-- Footer-->
        <footer class="footer text-center">
            <div class="container">
                <div class="row">
                    <!-- Footer Location-->
                    <div class="col-lg-4 mb-5 mb-lg-0">
                        <h4 class="text-uppercase mb-4">Location</h4>
                        <p class="lead mb-0">
                            인천광역시 미추홀구 인하로 100
                            <br />
                            컴퓨터시스템과
                        </p>
                    </div>
                    <!-- Footer Social Icons-->
                    <div class="col-lg-4 mb-5 mb-lg-0">
                        <h4 class="text-uppercase mb-4">Around the Web</h4>
                        <a class="btn btn-outline-light btn-social mx-1" href="#!"><i class="fab fa-fw fa-facebook-f"></i></a>
                        <a class="btn btn-outline-light btn-social mx-1" href="#!"><i class="fab fa-fw fa-twitter"></i></a>
                        <a class="btn btn-outline-light btn-social mx-1" href="#!"><i class="fab fa-fw fa-linkedin-in"></i></a>
                        <a class="btn btn-outline-light btn-social mx-1" href="#!"><i class="fab fa-fw fa-dribbble"></i></a>
                    </div>
                    <!-- Footer About Text-->
                    <div class="col-lg-4">
                        <h4 class="text-uppercase mb-4">About this project</h4>
                        <p class="lead mb-0">
                            머신러닝 입문 프로젝트 : 
                            <a href="https://github.com/PacaSim/Beer_Recommendation_system">[github source code]</a>
                            
                        </p>
                    </div>
                </div>
            </div>
        </footer>
        <!-- Copyright Section-->
        <div class="copyright py-4 text-center text-white">
            <div class="container"><small>Copyright &copy; Your Website 2023</small></div>
        </div>
        <!-- Portfolio Modals-->
        <!-- Portfolio Modal 1-->
        <div class="portfolio-modal modal fade" id="portfolioModal1" tabindex="-1" aria-labelledby="portfolioModal1" aria-hidden="true">
            <div class="modal-dialog modal-xl">
              <div class="modal-content">
                <div class="modal-header border-0">
                  <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center pb-5">
                  <div class="container">
                    <div class="row justify-content-center">
                      <div class="col-lg-8">
                        <!-- Portfolio Modal - Title -->
                        <h2 class="portfolio-modal-title text-secondary text-uppercase mb-0">{{result.0}}</h2>
                        <!-- Icon Divider -->
                        <div class="divider-custom">
                          <div class="divider-custom-line"></div>
                          <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                          <div class="divider-custom-line"></div>
                        </div>
                        <!-- Portfolio Modal - Image -->
                        <img class="img-fluid rounded mb-5" src="/static/assets/img/beer_image/{{result.0}}.jpg" alt="/static/assets/img/beer_image/alt.png" />
                        <!-- Portfolio Modal - Text -->
                        <div class="nb-4" id='myDiv1'></div>
                        <script>
                            var jsonData = {{ targetJson|tojson }};
                            var data = JSON.parse(jsonData);
                            data = [
                            {
                            type: 'scatterpolar',
                            r: data['cluster3'],
                            theta: ['Aroma', 'Appearance', 'Flavor','Mouthfeel', 'Overall'],
                            fill: 'toself',
                            name: 'Good',
                            marker : { color : 'salmon'}
                            },
                            {
                            type: 'scatterpolar',
                            r: data['cluster2'],
                            theta: ['Aroma', 'Appearance', 'Flavor','Mouthfeel', 'Overall'],
                            fill: 'toself',
                            name: 'SoSo',
                            marker : { color : 'blue'}
                            },
                            {
                            type: 'scatterpolar',
                            r: data['cluster1'],
                            theta: ['Aroma', 'Appearance', 'Flavor','Mouthfeel', 'Overall'],
                            fill: 'toself',
                            name: 'Bad',
                            marker : { color : 'skyblue'}
                            },
                            {
                            type: 'scatterpolar',
                            r: data['beer_cluster1'],
                            theta: ['Aroma', 'Appearance', 'Flavor','Mouthfeel', 'Overall'],
                            fill: 'toself',
                            name: data['beer_name'][0],
                            marker : { color : 'green'}
                            },
                            ]

                            layout = {
                            polar: {
                                radialaxis: {
                                visible: true,
                                range: [0, 1]
                                }
                            },
                            title: {
                                text:'클러스터 유형',
                                font: {
                                size: 24
                                },
                                x : 0.47
                            }
                            }  
                        Plotly.newPlot("myDiv1", data,layout)

                        </script>
                        <div id='line1'></div>
                        <script>
                            var jsonData = {{ targetJson|tojson }};
                            var data = JSON.parse(jsonData);
                        
                            var trace1 = {
                              x: data['tmp_year'][0],
                              y: data['tmp_ratings'][0],
                              type: 'scatter'
                            }
                        
                            var result = [trace1];
                        
                            layout = {
                              title: {
                                text:'연도별 평점 트렌드',
                                font: {
                                  size: 24
                                },
                                x : 0.5
                              }
                            }
                            Plotly.newPlot('line1', result, layout);
                        </script>
                        <!-- Star Rating -->
                        <div class="mb-4">
                            <div class="rate">
                                <form action="" method="post">
                                <input type="hidden" name="user_id" value="{{ current_user.id }}">
                                <input type="hidden" name="user_name" value="{{ current_user.name }}">
                                <input type="hidden" name="beer" value="{{result.0}}">
                                평점 
                                <input type="number" class="form-control" name="rating" min="0" max="5" step="0.5" style="text-align:center">
                              </div>
                              
                          </div>
                          <!-- Comment Section -->
                          <div class="mb-4">
                            <textarea  name="comment" class="form-control" id="comment-input" rows="4" placeholder="Write a comment"></textarea>
                            <button class="btn btn-primary mt-3" onclick="submitComment()">한 줄 평 남기기</button>
                          </div>
                        </form>
                          <!-- Comments Display -->                        
                          <div class="mb-4" id="comments">
                            <div class="comment-container text-left">
                                <div class="divider-custom">
                                    <div class="divider-custom-line"></div>
                                    <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                                    <div class="divider-custom-line"></div>
                                  </div>
                              {% for rate in all_rates1 %}
                                <div class="comment">
                                  <span class="username">{{ rate.user_name }}</span> - 
                                  <strong><span class="rating">평점 : {{ rate.rating }}점</span></strong><br>
                                  <span class="oneline">한 줄 평 : {{ rate.oneline }}</span>
                                </div>
                                <div class="divider"></div>
                              {% endfor %}
                            </div>
                          </div>                
                    </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

        <!-- Portfolio Modal 2-->
        <div class="portfolio-modal modal fade" id="portfolioModal2" tabindex="-1" aria-labelledby="portfolioModal2" aria-hidden="true">
            <div class="modal-dialog modal-xl">
              <div class="modal-content">
                <div class="modal-header border-0">
                  <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center pb-5">
                  <div class="container">
                    <div class="row justify-content-center">
                      <div class="col-lg-8">
                        <!-- Portfolio Modal - Title -->
                        <h2 class="portfolio-modal-title text-secondary text-uppercase mb-0">{{result.1}}</h2>
                        <!-- Icon Divider -->
                        <div class="divider-custom">
                          <div class="divider-custom-line"></div>
                          <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                          <div class="divider-custom-line"></div>
                        </div>
                        <!-- Portfolio Modal - Image -->
                        <img class="img-fluid rounded mb-5" src="/static/assets/img/beer_image/{{result.1}}.jpg" alt="..." />
                        <!-- Portfolio Modal - Text -->
                        <div class="nb-4" id='myDiv2'></div>
                        <script>
                            var jsonData = {{ targetJson|tojson }};
                            var data = JSON.parse(jsonData);
                            data = [
                            {
                            type: 'scatterpolar',
                            r: data['cluster3'],
                            theta: ['Aroma', 'Appearance', 'Flavor','Mouthfeel', 'Overall'],
                            fill: 'toself',
                            name: 'Good',
                            marker : { color : 'salmon'}
                            },
                            {
                            type: 'scatterpolar',
                            r: data['cluster2'],
                            theta: ['Aroma', 'Appearance', 'Flavor','Mouthfeel', 'Overall'],
                            fill: 'toself',
                            name: 'SoSo',
                            marker : { color : 'blue'}
                            },
                            {
                            type: 'scatterpolar',
                            r: data['cluster1'],
                            theta: ['Aroma', 'Appearance', 'Flavor','Mouthfeel', 'Overall'],
                            fill: 'toself',
                            name: 'Bad',
                            marker : { color : 'skyblue'}
                            },
                            {
                            type: 'scatterpolar',
                            r: data['beer_cluster2'],
                            theta: ['Aroma', 'Appearance', 'Flavor','Mouthfeel', 'Overall'],
                            fill: 'toself',
                            name: data['beer_name'][1],
                            marker : { color : 'green'}
                            },
                            ]

                            layout = {
                            polar: {
                                radialaxis: {
                                visible: true,
                                range: [0, 1]
                                }
                            },
                            title: {
                                text:'클러스터 유형',
                                font: {
                                size: 24
                                },
                                x : 0.47
                            }
                            }  
                        Plotly.newPlot("myDiv2", data,layout)

                        </script>
                        <div id='line2'></div>
                        <script>
                            var jsonData = {{ targetJson|tojson }};
                            var data = JSON.parse(jsonData);
                        
                            var trace1 = {
                              x: data['tmp_year'][1],
                              y: data['tmp_ratings'][1],
                              type: 'scatter'
                            }
                        
                            var result = [trace1];
                        
                            layout = {
                              title: {
                                text:'연도별 평점 트렌드',
                                font: {
                                  size: 24
                                },
                                x : 0.5
                              }
                            }
                            Plotly.newPlot('line2', result, layout);
                        </script>
                        <!-- Star Rating -->
                        <div class="mb-4">
                            <div class="rate">
                                <form action="" method="post">
                                <input type="hidden" name="user_id" value="{{ current_user.id }}">
                                <input type="hidden" name="user_name" value="{{ current_user.name }}">
                                <input type="hidden" name="beer" value="{{result.1}}">
                                평점 
                                <input type="number" class="form-control" name="rating" min="0" max="5" step="0.5" style="text-align:center">
                              </div>
                              
                          </div>
                          <!-- Comment Section -->
                          <div class="mb-4">
                            <textarea  name="comment" class="form-control" id="comment-input" rows="4" placeholder="Write a comment"></textarea>
                            <button class="btn btn-primary mt-3" onclick="submitComment()">한 줄 평 남기기</button>
                          </div>
                        </form>
                          <!-- Comments Display -->                        
                          <div class="mb-4" id="comments">
                            <div class="comment-container text-left">
                                <div class="divider-custom">
                                    <div class="divider-custom-line"></div>
                                    <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                                    <div class="divider-custom-line"></div>
                                  </div>
                              {% for rate in all_rates2 %}
                                <div class="comment">
                                  <span class="username">{{ rate.user_name }}</span> - 
                                  <strong><span class="rating">평점 : {{ rate.rating }}점</span></strong><br>
                                  <span class="oneline">한 줄 평 : {{ rate.oneline }}</span>
                                </div>
                                <div class="divider"></div>
                              {% endfor %}
                            </div>
                          </div>                
                    </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        <!-- Portfolio Modal 3-->
        <div class="portfolio-modal modal fade" id="portfolioModal3" tabindex="-1" aria-labelledby="portfolioModal3" aria-hidden="true">
            <div class="modal-dialog modal-xl">
              <div class="modal-content">
                <div class="modal-header border-0">
                  <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center pb-5">
                  <div class="container">
                    <div class="row justify-content-center">
                      <div class="col-lg-8">
                        <!-- Portfolio Modal - Title -->
                        <h2 class="portfolio-modal-title text-secondary text-uppercase mb-0">{{result.2}}</h2>
                        <!-- Icon Divider -->
                        <div class="divider-custom">
                          <div class="divider-custom-line"></div>
                          <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                          <div class="divider-custom-line"></div>
                        </div>
                        <!-- Portfolio Modal - Image -->
                        <img class="img-fluid rounded mb-5" src="/static/assets/img/beer_image/{{result.2}}.jpg" alt="..." />
                        <!-- Portfolio Modal - Text -->
                        <div class="nb-4" id='myDiv3'></div>
                        <script>
                            var jsonData = {{ targetJson|tojson }};
                            var data = JSON.parse(jsonData);
                            data = [
                            {
                            type: 'scatterpolar',
                            r: data['cluster3'],
                            theta: ['Aroma', 'Appearance', 'Flavor','Mouthfeel', 'Overall'],
                            fill: 'toself',
                            name: 'Good',
                            marker : { color : 'salmon'}
                            },
                            {
                            type: 'scatterpolar',
                            r: data['cluster2'],
                            theta: ['Aroma', 'Appearance', 'Flavor','Mouthfeel', 'Overall'],
                            fill: 'toself',
                            name: 'SoSo',
                            marker : { color : 'blue'}
                            },
                            {
                            type: 'scatterpolar',
                            r: data['cluster1'],
                            theta: ['Aroma', 'Appearance', 'Flavor','Mouthfeel', 'Overall'],
                            fill: 'toself',
                            name: 'Bad',
                            marker : { color : 'skyblue'}
                            },
                            {
                            type: 'scatterpolar',
                            r: data['beer_cluster3'],
                            theta: ['Aroma', 'Appearance', 'Flavor','Mouthfeel', 'Overall'],
                            fill: 'toself',
                            name: data['beer_name'][2],
                            marker : { color : 'green'}
                            },
                            ]

                            layout = {
                            polar: {
                                radialaxis: {
                                visible: true,
                                range: [0, 1]
                                }
                            },
                            title: {
                                text:'클러스터 유형',
                                font: {
                                size: 24
                                },
                                x : 0.47
                            }
                            }  
                        Plotly.newPlot("myDiv3", data,layout)

                        </script>
                        <div id='line3'></div>
                        <script>
                            var jsonData = {{ targetJson|tojson }};
                            var data = JSON.parse(jsonData);
                        
                            var trace1 = {
                              x: data['tmp_year'][2],
                              y: data['tmp_ratings'][2],
                              type: 'scatter'
                            }
                        
                            var result = [trace1];
                        
                            layout = {
                              title: {
                                text:'연도별 평점 트렌드',
                                font: {
                                  size: 24
                                },
                                x : 0.5
                              }
                            }
                            Plotly.newPlot('line3', result, layout);
                        </script>
                        <!-- Star Rating -->
                        <div class="mb-4">
                            <div class="rate">
                                <form action="" method="post">
                                <input type="hidden" name="user_id" value="{{ current_user.id }}">
                                <input type="hidden" name="user_name" value="{{ current_user.name }}">
                                <input type="hidden" name="beer" value="{{result.2}}">
                                평점 
                                <input type="number" class="form-control" name="rating" min="0" max="5" step="0.5" style="text-align:center">
                              </div>
                              
                          </div>
                          <!-- Comment Section -->
                          <div class="mb-4">
                            <textarea  name="comment" class="form-control" id="comment-input" rows="4" placeholder="Write a comment"></textarea>
                            <button class="btn btn-primary mt-3" onclick="submitComment()">한 줄 평 남기기</button>
                          </div>
                        </form>
                          <!-- Comments Display -->                        
                          <div class="mb-4" id="comments">
                            <div class="comment-container text-left">
                                <div class="divider-custom">
                                    <div class="divider-custom-line"></div>
                                    <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                                    <div class="divider-custom-line"></div>
                                  </div>
                              {% for rate in all_rates3 %}
                                <div class="comment">
                                  <span class="username">{{ rate.user_name }}</span> - 
                                  <strong><span class="rating">평점 : {{ rate.rating }}점</span></strong><br>
                                  <span class="oneline">한 줄 평 : {{ rate.oneline }}</span>
                                </div>
                                <div class="divider"></div>
                              {% endfor %}
                            </div>
                          </div>                
                    </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        <!-- Portfolio Modal 4-->
        <div class="portfolio-modal modal fade" id="portfolioModal4" tabindex="-1" aria-labelledby="portfolioModal4" aria-hidden="true">
            <div class="modal-dialog modal-xl">
              <div class="modal-content">
                <div class="modal-header border-0">
                  <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center pb-5">
                  <div class="container">
                    <div class="row justify-content-center">
                      <div class="col-lg-8">
                        <!-- Portfolio Modal - Title -->
                        <h2 class="portfolio-modal-title text-secondary text-uppercase mb-0">{{result.3}}</h2>
                        <!-- Icon Divider -->
                        <div class="divider-custom">
                          <div class="divider-custom-line"></div>
                          <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                          <div class="divider-custom-line"></div>
                        </div>
                        <!-- Portfolio Modal - Image -->
                        <img class="img-fluid rounded mb-5" src="/static/assets/img/beer_image/{{result.3}}.jpg" alt="..." />
                        <!-- Portfolio Modal - Text -->
                        <div class="nb-4" id='myDiv4'></div>
                        <script>
                            var jsonData = {{ targetJson|tojson }};
                            var data = JSON.parse(jsonData);
                            data = [
                            {
                            type: 'scatterpolar',
                            r: data['cluster3'],
                            theta: ['Aroma', 'Appearance', 'Flavor','Mouthfeel', 'Overall'],
                            fill: 'toself',
                            name: 'Good',
                            marker : { color : 'salmon'}
                            },
                            {
                            type: 'scatterpolar',
                            r: data['cluster2'],
                            theta: ['Aroma', 'Appearance', 'Flavor','Mouthfeel', 'Overall'],
                            fill: 'toself',
                            name: 'SoSo',
                            marker : { color : 'blue'}
                            },
                            {
                            type: 'scatterpolar',
                            r: data['cluster1'],
                            theta: ['Aroma', 'Appearance', 'Flavor','Mouthfeel', 'Overall'],
                            fill: 'toself',
                            name: 'Bad',
                            marker : { color : 'skyblue'}
                            },
                            {
                            type: 'scatterpolar',
                            r: data['beer_cluster4'],
                            theta: ['Aroma', 'Appearance', 'Flavor','Mouthfeel', 'Overall'],
                            fill: 'toself',
                            name: data['beer_name'][3],
                            marker : { color : 'green'}
                            },
                            ]

                            layout = {
                            polar: {
                                radialaxis: {
                                visible: true,
                                range: [0, 1]
                                }
                            },
                            title: {
                                text:'클러스터 유형',
                                font: {
                                size: 24
                                },
                                x : 0.47
                            }
                            }  
                        Plotly.newPlot("myDiv4", data,layout)

                        </script>
                        <div id='line4'></div>
                        <script>
                            var jsonData = {{ targetJson|tojson }};
                            var data = JSON.parse(jsonData);
                        
                            var trace1 = {
                              x: data['tmp_year'][3],
                              y: data['tmp_ratings'][3],
                              type: 'scatter'
                            }
                        
                            var result = [trace1];
                        
                            layout = {
                              title: {
                                text:'연도별 평점 트렌드',
                                font: {
                                  size: 24
                                },
                                x : 0.5
                              }
                            }
                            Plotly.newPlot('line4', result, layout);
                        </script>
                        <!-- Star Rating -->
                        <div class="mb-4">
                            <div class="rate">
                                <form action="" method="post">
                                <input type="hidden" name="user_id" value="{{ current_user.id }}">
                                <input type="hidden" name="user_name" value="{{ current_user.name }}">
                                <input type="hidden" name="beer" value="{{result.3}}">
                                평점 
                                <input type="number" class="form-control" name="rating" min="0" max="5" step="0.5" style="text-align:center">
                              </div>
                              
                          </div>
                          <!-- Comment Section -->
                          <div class="mb-4">
                            <textarea  name="comment" class="form-control" id="comment-input" rows="4" placeholder="Write a comment"></textarea>
                            <button class="btn btn-primary mt-3" onclick="submitComment()">한 줄 평 남기기</button>
                          </div>
                        </form>
                          <!-- Comments Display -->                        
                          <div class="mb-4" id="comments">
                            <div class="comment-container text-left">
                                <div class="divider-custom">
                                    <div class="divider-custom-line"></div>
                                    <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                                    <div class="divider-custom-line"></div>
                                  </div>
                              {% for rate in all_rates4 %}
                                <div class="comment">
                                  <span class="username">{{ rate.user_name }}</span> - 
                                  <strong><span class="rating">평점 : {{ rate.rating }}점</span></strong><br>
                                  <span class="oneline">한 줄 평 : {{ rate.oneline }}</span>
                                </div>
                                <div class="divider"></div>
                              {% endfor %}
                            </div>
                          </div>                
                    </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        <!-- Portfolio Modal 5-->
        <div class="portfolio-modal modal fade" id="portfolioModal5" tabindex="-1" aria-labelledby="portfolioModal5" aria-hidden="true">
            <div class="modal-dialog modal-xl">
              <div class="modal-content">
                <div class="modal-header border-0">
                  <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center pb-5">
                  <div class="container">
                    <div class="row justify-content-center">
                      <div class="col-lg-8">
                        <!-- Portfolio Modal - Title -->
                        <h2 class="portfolio-modal-title text-secondary text-uppercase mb-0">{{result.4}}</h2>
                        <!-- Icon Divider -->
                        <div class="divider-custom">
                          <div class="divider-custom-line"></div>
                          <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                          <div class="divider-custom-line"></div>
                        </div>
                        <!-- Portfolio Modal - Image -->
                        <img class="img-fluid rounded mb-5" src="/static/assets/img/beer_image/{{result.4}}.jpg" alt="..." />
                        <!-- Portfolio Modal - Text -->
                        <div class="nb-4" id='myDiv5'></div>
                        <script>
                            var jsonData = {{ targetJson|tojson }};
                            var data = JSON.parse(jsonData);
                            data = [
                            {
                            type: 'scatterpolar',
                            r: data['cluster3'],
                            theta: ['Aroma', 'Appearance', 'Flavor','Mouthfeel', 'Overall'],
                            fill: 'toself',
                            name: 'Good',
                            marker : { color : 'salmon'}
                            },
                            {
                            type: 'scatterpolar',
                            r: data['cluster2'],
                            theta: ['Aroma', 'Appearance', 'Flavor','Mouthfeel', 'Overall'],
                            fill: 'toself',
                            name: 'SoSo',
                            marker : { color : 'blue'}
                            },
                            {
                            type: 'scatterpolar',
                            r: data['cluster1'],
                            theta: ['Aroma', 'Appearance', 'Flavor','Mouthfeel', 'Overall'],
                            fill: 'toself',
                            name: 'Bad',
                            marker : { color : 'skyblue'}
                            },
                            {
                            type: 'scatterpolar',
                            r: data['beer_cluster5'],
                            theta: ['Aroma', 'Appearance', 'Flavor','Mouthfeel', 'Overall'],
                            fill: 'toself',
                            name: data['beer_name'][4],
                            marker : { color : 'green'}
                            },
                            ]

                            layout = {
                            polar: {
                                radialaxis: {
                                visible: true,
                                range: [0, 1]
                                }
                            },
                            title: {
                                text:'클러스터 유형',
                                font: {
                                size: 24
                                },
                                x : 0.47
                            }
                            }  
                        Plotly.newPlot("myDiv5", data,layout)

                        </script>
                        <div id='line5'></div>
                        <script>
                            var jsonData = {{ targetJson|tojson }};
                            var data = JSON.parse(jsonData);
                        
                            var trace1 = {
                              x: data['tmp_year'][4],
                              y: data['tmp_ratings'][4],
                              type: 'scatter'
                            }
                        
                            var result = [trace1];
                        
                            layout = {
                              title: {
                                text:'연도별 평점 트렌드',
                                font: {
                                  size: 24
                                },
                                x : 0.5
                              }
                            }
                            Plotly.newPlot('line5', result, layout);
                        </script>
                        <!-- Star Rating -->
                        <div class="mb-4">
                            <div class="rate">
                                <form action="" method="post">
                                <input type="hidden" name="user_id" value="{{ current_user.id }}">
                                <input type="hidden" name="user_name" value="{{ current_user.name }}">
                                <input type="hidden" name="beer" value="{{result.4}}">
                                평점 
                                <input type="number" class="form-control" name="rating" min="0" max="5" step="0.5" style="text-align:center">
                              </div>
                              
                          </div>
                          <!-- Comment Section -->
                          <div class="mb-4">
                            <textarea  name="comment" class="form-control" id="comment-input" rows="4" placeholder="Write a comment"></textarea>
                            <button class="btn btn-primary mt-3" onclick="submitComment()">한 줄 평 남기기</button>
                          </div>
                        </form>
                          <!-- Comments Display -->                        
                          <div class="mb-4" id="comments">
                            <div class="comment-container text-left">
                                <div class="divider-custom">
                                    <div class="divider-custom-line"></div>
                                    <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                                    <div class="divider-custom-line"></div>
                                  </div>
                              {% for rate in all_rates5 %}
                                <div class="comment">
                                  <span class="username">{{ rate.user_name }}</span> - 
                                  <strong><span class="rating">평점 : {{ rate.rating }}점</span></strong><br>
                                  <span class="oneline">한 줄 평 : {{ rate.oneline }}</span>
                                </div>
                                <div class="divider"></div>
                              {% endfor %}
                            </div>
                          </div>                
                    </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        <!-- Portfolio Modal 6-->
        <div class="portfolio-modal modal fade" id="portfolioModal6" tabindex="-1" aria-labelledby="portfolioModal6" aria-hidden="true">
            <div class="modal-dialog modal-xl">
              <div class="modal-content">
                <div class="modal-header border-0">
                  <button class="btn-close" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center pb-5">
                  <div class="container">
                    <div class="row justify-content-center">
                      <div class="col-lg-8">
                        <!-- Portfolio Modal - Title -->
                        <h2 class="portfolio-modal-title text-secondary text-uppercase mb-0">{{result.5}}</h2>
                        <!-- Icon Divider -->
                        <div class="divider-custom">
                          <div class="divider-custom-line"></div>
                          <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                          <div class="divider-custom-line"></div>
                        </div>
                        <!-- Portfolio Modal - Image -->
                        <img class="img-fluid rounded mb-5" src="/static/assets/img/beer_image/{{result.5}}.jpg" alt="..." />
                        <!-- Portfolio Modal - Text -->
                        <div class="nb-4" id='myDiv6'></div>
                        <script>
                            var jsonData = {{ targetJson|tojson }};
                            var data = JSON.parse(jsonData);
                            data = [
                            {
                            type: 'scatterpolar',
                            r: data['cluster3'],
                            theta: ['Aroma', 'Appearance', 'Flavor','Mouthfeel', 'Overall'],
                            fill: 'toself',
                            name: 'Good',
                            marker : { color : 'salmon'}
                            },
                            {
                            type: 'scatterpolar',
                            r: data['cluster2'],
                            theta: ['Aroma', 'Appearance', 'Flavor','Mouthfeel', 'Overall'],
                            fill: 'toself',
                            name: 'SoSo',
                            marker : { color : 'blue'}
                            },
                            {
                            type: 'scatterpolar',
                            r: data['cluster1'],
                            theta: ['Aroma', 'Appearance', 'Flavor','Mouthfeel', 'Overall'],
                            fill: 'toself',
                            name: 'Bad',
                            marker : { color : 'skyblue'}
                            },
                            {
                            type: 'scatterpolar',
                            r: data['beer_cluster6'],
                            theta: ['Aroma', 'Appearance', 'Flavor','Mouthfeel', 'Overall'],
                            fill: 'toself',
                            name: data['beer_name'][5],
                            marker : { color : 'green'}
                            },
                            ]

                            layout = {
                            polar: {
                                radialaxis: {
                                visible: true,
                                range: [0, 1]
                                }
                            },
                            title: {
                                text:'클러스터 유형',
                                font: {
                                size: 24
                                },
                                x : 0.47
                            }
                            }  
                        Plotly.newPlot("myDiv6", data,layout)

                        </script>
                        <div id='line6'></div>
                        <script>
                            var jsonData = {{ targetJson|tojson }};
                            var data = JSON.parse(jsonData);
                        
                            var trace1 = {
                              x: data['tmp_year'][5],
                              y: data['tmp_ratings'][5],
                              type: 'scatter'
                            }
                        
                            var result = [trace1];
                        
                            layout = {
                              title: {
                                text:'연도별 평점 트렌드',
                                font: {
                                  size: 24
                                },
                                x : 0.5
                              }
                            }
                            Plotly.newPlot('line6', result, layout);
                        </script>
                        <!-- Star Rating -->
                        <div class="mb-4">
                            <div class="rate">
                                <form action="" method="post">
                                <input type="hidden" name="user_id" value="{{ current_user.id }}">
                                <input type="hidden" name="user_name" value="{{ current_user.name }}">
                                <input type="hidden" name="beer" value="{{result.5}}">
                                평점 
                                <input type="number" class="form-control" name="rating" min="0" max="5" step="0.5" style="text-align:center">
                              </div>
                              
                          </div>
                          <!-- Comment Section -->
                          <div class="mb-4">
                            <textarea  name="comment" class="form-control" id="comment-input" rows="4" placeholder="Write a comment"></textarea>
                            <button class="btn btn-primary mt-3" onclick="submitComment()">한 줄 평 남기기</button>
                          </div>
                        </form>
                          <!-- Comments Display -->                        
                          <div class="mb-4" id="comments">
                            <div class="comment-container text-left">
                                <div class="divider-custom">
                                    <div class="divider-custom-line"></div>
                                    <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                                    <div class="divider-custom-line"></div>
                                  </div>
                              {% for rate in all_rates6 %}
                                <div class="comment">
                                  <span class="username">{{ rate.user_name }}</span> - 
                                  <strong><span class="rating">평점 : {{ rate.rating }}점</span></strong><br>
                                  <span class="oneline">한 줄 평 : {{ rate.oneline }}</span>
                                </div>
                                <div class="divider"></div>
                              {% endfor %}
                            </div>
                          </div>                
                    </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <!-- * *                               SB Forms JS                               * *-->
        <!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
    </body>
</html>
